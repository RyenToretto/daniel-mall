# 响应式适配规范

> Daniel Mall - PC/移动端响应式设计文档

---

## 一、设计原则

### 1.1 核心约束

| 约束         | 说明                                 |
| ------------ | ------------------------------------ |
| **基准字号** | `html { font-size: 16px; }` 固定不变 |
| **移动优先** | 从小屏幕开始设计，逐步增强           |
| **流式布局** | 使用百分比和弹性布局                 |
| **断点设计** | 基于内容而非设备设置断点             |

### 1.2 适配策略

```
移动端 (< 768px)
  ↓ 渐进增强
平板端 (768px - 1024px)
  ↓ 渐进增强
桌面端 (> 1024px)
```

---

## 二、断点定义

### 2.1 断点值

| 断点  | 宽度            | 说明     |
| ----- | --------------- | -------- |
| `xs`  | 0 - 639px       | 手机竖屏 |
| `sm`  | 640px - 767px   | 手机横屏 |
| `md`  | 768px - 1023px  | 平板     |
| `lg`  | 1024px - 1279px | 小桌面   |
| `xl`  | 1280px - 1535px | 桌面     |
| `2xl` | ≥ 1536px        | 大桌面   |

### 2.2 SCSS 变量

```scss
// assets/styles/_breakpoints.scss
$breakpoints: (
  'xs': 0,
  'sm': 640px,
  'md': 768px,
  'lg': 1024px,
  'xl': 1280px,
  '2xl': 1536px,
);

// 媒体查询 Mixin
@mixin respond-to($breakpoint) {
  $value: map-get($breakpoints, $breakpoint);
  @if $value {
    @media (min-width: $value) {
      @content;
    }
  }
}

// 使用示例
.container {
  padding: 16px;

  @include respond-to('md') {
    padding: 24px;
  }

  @include respond-to('lg') {
    padding: 32px;
  }
}
```

### 2.3 TailwindCSS 配置

```typescript
// tailwind.config.ts
export default {
  theme: {
    screens: {
      xs: '0px',
      sm: '640px',
      md: '768px',
      lg: '1024px',
      xl: '1280px',
      '2xl': '1536px',
    },
  },
}
```

---

## 三、布局适配

### 3.1 容器宽度

```scss
.dm-container {
  width: 100%;
  margin: 0 auto;
  padding: 0 var(--dm-spacing-md);

  // sm: 640px
  @include respond-to('sm') {
    max-width: 640px;
  }

  // md: 768px
  @include respond-to('md') {
    max-width: 768px;
    padding: 0 var(--dm-spacing-lg);
  }

  // lg: 1024px
  @include respond-to('lg') {
    max-width: 1024px;
  }

  // xl: 1280px
  @include respond-to('xl') {
    max-width: 1280px;
  }

  // 2xl: 1536px
  @include respond-to('2xl') {
    max-width: 1440px;
  }
}
```

### 3.2 栅格系统

```scss
.dm-grid {
  display: grid;
  gap: var(--dm-spacing-md);

  // 默认单列
  grid-template-columns: 1fr;

  // sm: 2列
  @include respond-to('sm') {
    grid-template-columns: repeat(2, 1fr);
  }

  // md: 3列
  @include respond-to('md') {
    grid-template-columns: repeat(3, 1fr);
    gap: var(--dm-spacing-lg);
  }

  // lg: 4列
  @include respond-to('lg') {
    grid-template-columns: repeat(4, 1fr);
  }
}
```

### 3.3 侧边栏布局

```vue
<!-- 响应式侧边栏布局 -->
<template>
  <div class="layout">
    <!-- 移动端: 底部导航 / 桌面端: 左侧边栏 -->
    <aside class="sidebar" :class="{ 'is-open': sidebarOpen }">
      <nav class="sidebar__nav">
        <!-- 导航内容 -->
      </nav>
    </aside>

    <main class="main-content">
      <slot />
    </main>

    <!-- 移动端底部导航 -->
    <nav class="mobile-nav md:hidden">
      <!-- 底部导航内容 -->
    </nav>
  </div>
</template>

<style lang="scss" scoped>
.layout {
  display: flex;
  min-height: 100vh;
}

.sidebar {
  // 移动端：抽屉式
  position: fixed;
  left: 0;
  top: 0;
  bottom: 0;
  width: 280px;
  transform: translateX(-100%);
  transition: transform var(--dm-transition-normal) var(--dm-ease-out);
  z-index: 100;

  &.is-open {
    transform: translateX(0);
  }

  // 桌面端：固定显示
  @include respond-to('md') {
    position: sticky;
    transform: none;
    flex-shrink: 0;
  }
}

.main-content {
  flex: 1;
  min-width: 0;
  padding-bottom: 60px; // 移动端底部导航空间

  @include respond-to('md') {
    padding-bottom: 0;
  }
}

.mobile-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 60px;
  background: var(--dm-color-surface);
  border-top: 1px solid var(--dm-color-border);
}
</style>
```

---

## 四、组件适配

### 4.1 工具卡片

```vue
<!-- 响应式工具卡片 -->
<template>
  <div class="tool-card">
    <div class="tool-card__icon">
      <Icon :name="tool.icon" />
    </div>
    <div class="tool-card__content">
      <h3>{{ tool.name }}</h3>
      <p>{{ tool.description }}</p>
    </div>
    <div class="tool-card__actions">
      <button class="favorite-btn">
        <Icon name="heart" />
      </button>
    </div>
  </div>
</template>

<style lang="scss" scoped>
.tool-card {
  display: flex;
  align-items: center;
  gap: var(--dm-spacing-md);
  padding: var(--dm-spacing-md);

  // 移动端：垂直布局
  flex-direction: column;
  text-align: center;

  // 平板及以上：水平布局
  @include respond-to('md') {
    flex-direction: row;
    text-align: left;
  }

  &__icon {
    width: 48px;
    height: 48px;

    @include respond-to('md') {
      width: 56px;
      height: 56px;
    }
  }

  &__content {
    flex: 1;

    h3 {
      font-size: var(--dm-font-size-md);

      @include respond-to('md') {
        font-size: var(--dm-font-size-lg);
      }
    }

    p {
      // 移动端：限制行数
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;

      @include respond-to('md') {
        -webkit-line-clamp: 1;
      }
    }
  }

  &__actions {
    // 移动端：全宽
    width: 100%;
    display: flex;
    justify-content: center;

    @include respond-to('md') {
      width: auto;
    }
  }
}
</style>
```

### 4.2 工具执行器

```vue
<!-- 响应式工具执行器 -->
<template>
  <div class="tool-executor">
    <div class="tool-executor__input">
      <!-- 输入表单 -->
    </div>
    <div class="tool-executor__output">
      <!-- 结果展示 -->
    </div>
  </div>
</template>

<style lang="scss" scoped>
.tool-executor {
  display: flex;
  gap: var(--dm-spacing-lg);

  // 移动端：垂直堆叠
  flex-direction: column;

  // 桌面端：左右分栏
  @include respond-to('lg') {
    flex-direction: row;

    &__input,
    &__output {
      flex: 1;
      min-width: 0;
    }
  }
}
</style>
```

### 4.3 模态框

```scss
.modal {
  // 移动端：全屏
  position: fixed;
  inset: 0;

  // 桌面端：居中弹窗
  @include respond-to('md') {
    inset: auto;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    max-width: 600px;
    max-height: 80vh;
    border-radius: var(--dm-radius-lg);
  }
}
```

---

## 五、字体适配

### 5.1 字体大小

```scss
// 基准字号固定 16px
html {
  font-size: 16px;
}

// 标题响应式
.heading-1 {
  font-size: 24px;

  @include respond-to('md') {
    font-size: 30px;
  }

  @include respond-to('lg') {
    font-size: 36px;
  }
}

.heading-2 {
  font-size: 20px;

  @include respond-to('md') {
    font-size: 24px;
  }
}

// 正文保持 16px
.body-text {
  font-size: 16px;
  line-height: 1.6;
}

// 辅助文字
.caption {
  font-size: 14px;

  @include respond-to('lg') {
    font-size: 12px; // 大屏幕可以更小
  }
}
```

### 5.2 行高

```scss
:root {
  --dm-line-height-tight: 1.25;
  --dm-line-height-normal: 1.5;
  --dm-line-height-relaxed: 1.75;
}

// 移动端使用更宽松的行高提升可读性
.content {
  line-height: var(--dm-line-height-relaxed);

  @include respond-to('md') {
    line-height: var(--dm-line-height-normal);
  }
}
```

---

## 六、间距适配

### 6.1 响应式间距

```scss
// 间距变量（基于视口）
:root {
  // 移动端基础间距
  --dm-page-padding: 16px;
  --dm-section-gap: 24px;
  --dm-card-padding: 16px;
}

@media (min-width: 768px) {
  :root {
    --dm-page-padding: 24px;
    --dm-section-gap: 32px;
    --dm-card-padding: 20px;
  }
}

@media (min-width: 1024px) {
  :root {
    --dm-page-padding: 32px;
    --dm-section-gap: 48px;
    --dm-card-padding: 24px;
  }
}
```

### 6.2 使用示例

```scss
.page {
  padding: var(--dm-page-padding);
}

.section {
  margin-bottom: var(--dm-section-gap);
}

.card {
  padding: var(--dm-card-padding);
}
```

---

## 七、触控适配

### 7.1 触摸目标大小

```scss
// 移动端最小触摸目标 44x44px
.touch-target {
  min-width: 44px;
  min-height: 44px;

  @include respond-to('md') {
    min-width: 32px;
    min-height: 32px;
  }
}

// 按钮
.kv-button {
  min-height: 44px;
  padding: 12px 20px;

  @include respond-to('md') {
    min-height: 36px;
    padding: 8px 16px;
  }
}
```

### 7.2 滑动手势

```scss
// 横向滚动容器
.scroll-container {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;

  &::-webkit-scrollbar {
    display: none;
  }

  // 桌面端显示滚动条
  @include respond-to('md') {
    scrollbar-width: thin;

    &::-webkit-scrollbar {
      display: block;
      height: 8px;
    }
  }
}
```

---

## 八、图片适配

### 8.1 响应式图片

```vue
<template>
  <picture>
    <source media="(min-width: 1024px)" srcset="/images/hero-desktop.webp" />
    <source media="(min-width: 768px)" srcset="/images/hero-tablet.webp" />
    <img src="/images/hero-mobile.webp" alt="Hero" loading="lazy" />
  </picture>
</template>
```

### 8.2 图片尺寸

```scss
.responsive-image {
  width: 100%;
  height: auto;
  object-fit: cover;

  // 固定宽高比
  aspect-ratio: 16 / 9;

  @include respond-to('md') {
    aspect-ratio: 21 / 9;
  }
}
```

---

## 九、测试检查清单

### 9.1 断点测试

- [ ] 375px (iPhone SE)
- [ ] 414px (iPhone Plus)
- [ ] 768px (iPad)
- [ ] 1024px (iPad Pro)
- [ ] 1280px (桌面)
- [ ] 1920px (大桌面)

### 9.2 功能测试

- [ ] 导航在各断点正常显示
- [ ] 卡片布局正确响应
- [ ] 模态框在移动端全屏
- [ ] 触摸目标足够大
- [ ] 字体大小清晰可读
- [ ] 横向滚动流畅
