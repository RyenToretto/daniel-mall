# 主题系统设计

> Daniel Mall - 三主题系统设计文档

---

## 一、主题概述

### 1.1 主题类型

| 主题  | 类名           | 说明                       | 默认 |
| ----- | -------------- | -------------------------- | ---- |
| Light | `.theme-light` | 亮色主题，适合日间使用     | 否   |
| Dark  | `.theme-dark`  | 暗色主题，减少眼睛疲劳     | 否   |
| Hero  | `.theme-hero`  | 英雄联盟风格，高贵金色主题 | ✅   |

### 1.2 设计原则

1. **CSS 变量驱动**：所有颜色通过 CSS 变量定义
2. **语义化命名**：变量名描述用途而非颜色值
3. **渐进增强**：基础样式兼容，主题层增强
4. **无缝切换**：主题切换无闪烁

---

## 二、CSS 变量体系

### 2.1 变量命名规范

```
--dm-{category}-{property}[-{variant}]

示例：
--dm-color-primary        # 主色
--dm-color-primary-hover  # 主色悬停态
--dm-spacing-md           # 中等间距
--dm-shadow-lg            # 大阴影
```

### 2.2 变量分类

| 分类 | 前缀                | 说明       |
| ---- | ------------------- | ---------- |
| 颜色 | `--dm-color-*`      | 所有颜色值 |
| 间距 | `--dm-spacing-*`    | 内外边距   |
| 圆角 | `--dm-radius-*`     | 边框圆角   |
| 阴影 | `--dm-shadow-*`     | 盒子阴影   |
| 字体 | `--dm-font-*`       | 字体相关   |
| 动画 | `--dm-transition-*` | 过渡动画   |

---

## 三、Light 主题

### 3.1 配色方案

```scss
.theme-light {
  // 主色调 - 蓝色
  --dm-color-primary: #3b82f6;
  --dm-color-primary-hover: #2563eb;
  --dm-color-primary-light: #eff6ff;

  // 背景色
  --dm-color-background: #ffffff;
  --dm-color-surface: #f9fafb;
  --dm-color-surface-elevated: #ffffff;

  // 边框色
  --dm-color-border: #e5e7eb;
  --dm-color-border-light: #f3f4f6;

  // 文字色
  --dm-color-text: #111827;
  --dm-color-text-secondary: #6b7280;
  --dm-color-text-muted: #9ca3af;

  // 状态色
  --dm-color-success: #22c55e;
  --dm-color-warning: #f59e0b;
  --dm-color-error: #ef4444;
  --dm-color-info: #3b82f6;

  // 阴影
  --dm-shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --dm-shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  --dm-shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
}
```

---

## 四、Dark 主题

### 4.1 配色方案

```scss
.theme-dark {
  // 主色调 - 蓝色（更亮）
  --dm-color-primary: #60a5fa;
  --dm-color-primary-hover: #93c5fd;
  --dm-color-primary-light: #1e3a5f;

  // 背景色
  --dm-color-background: #111827;
  --dm-color-surface: #1f2937;
  --dm-color-surface-elevated: #374151;

  // 边框色
  --dm-color-border: #374151;
  --dm-color-border-light: #4b5563;

  // 文字色
  --dm-color-text: #f9fafb;
  --dm-color-text-secondary: #9ca3af;
  --dm-color-text-muted: #6b7280;

  // 状态色
  --dm-color-success: #4ade80;
  --dm-color-warning: #fbbf24;
  --dm-color-error: #f87171;
  --dm-color-info: #60a5fa;

  // 阴影
  --dm-shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
  --dm-shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.4);
  --dm-shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.5);
}
```

---

## 五、Hero 主题（默认）

### 5.1 设计灵感

参考英雄联盟客户端的高贵金色主题：

- 金色作为主色调，体现高贵感
- 深蓝黑作为背景，增强对比度
- 发光效果增加科技感

### 5.2 配色方案

```scss
.theme-hero {
  // 主色调 - 金色
  --dm-color-primary: #c89b3c;
  --dm-color-primary-hover: #c8aa6e;
  --dm-color-primary-light: #f0e6d3;
  --dm-color-primary-dark: #785a28;

  // 背景色 - 深蓝黑
  --dm-color-background: #010a13;
  --dm-color-surface: #1e2328;
  --dm-color-surface-elevated: #3c3c41;
  --dm-color-surface-overlay: rgba(1, 10, 19, 0.9);

  // 边框色
  --dm-color-border: #463714;
  --dm-color-border-light: #5b5a56;
  --dm-color-border-glow: rgba(200, 155, 60, 0.5);

  // 文字色
  --dm-color-text: #f0e6d3;
  --dm-color-text-secondary: #a09b8c;
  --dm-color-text-muted: #5b5a56;

  // 状态色
  --dm-color-success: #0ac8b9;
  --dm-color-warning: #c89b3c;
  --dm-color-error: #ff4444;
  --dm-color-info: #0397ab;

  // 渐变
  --dm-gradient-gold: linear-gradient(180deg, #f0e6d3 0%, #c89b3c 50%, #785a28 100%);
  --dm-gradient-dark: linear-gradient(180deg, #1e2328 0%, #010a13 100%);
  --dm-gradient-border: linear-gradient(90deg, transparent 0%, #c89b3c 50%, transparent 100%);

  // 发光效果
  --dm-glow-gold: 0 0 10px rgba(200, 155, 60, 0.3), 0 0 20px rgba(200, 155, 60, 0.2);
  --dm-glow-cyan: 0 0 10px rgba(10, 200, 185, 0.3);
  --dm-inner-glow: inset 0 0 10px rgba(200, 155, 60, 0.1);

  // 阴影
  --dm-shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.5);
  --dm-shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.6);
  --dm-shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.7);
}
```

### 5.3 特殊样式

```scss
// Hero 主题按钮
.theme-hero {
  .kv-button--primary {
    background: var(--dm-gradient-gold);
    border: 1px solid var(--dm-color-border);
    color: var(--dm-color-background);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-weight: 600;

    &:hover {
      box-shadow: var(--dm-glow-gold);
      border-color: var(--dm-color-primary-light);
    }
  }

  // Hero 主题卡片
  .kv-card {
    background: var(--dm-color-surface);
    border: 1px solid var(--dm-color-border);
    box-shadow: var(--dm-inner-glow);

    // 顶部金色边框
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--dm-gradient-border);
    }
  }

  // Hero 主题输入框
  .kv-input {
    background: rgba(30, 35, 40, 0.8);
    border: 1px solid var(--dm-color-border);

    &:focus {
      border-color: var(--dm-color-primary);
      box-shadow: 0 0 0 2px rgba(200, 155, 60, 0.2);
    }
  }
}
```

---

## 六、通用变量

### 6.1 间距

```scss
:root {
  --dm-spacing-xs: 4px;
  --dm-spacing-sm: 8px;
  --dm-spacing-md: 16px;
  --dm-spacing-lg: 24px;
  --dm-spacing-xl: 32px;
  --dm-spacing-2xl: 48px;
  --dm-spacing-3xl: 64px;
}
```

### 6.2 圆角

```scss
:root {
  --dm-radius-sm: 4px;
  --dm-radius-md: 8px;
  --dm-radius-lg: 12px;
  --dm-radius-xl: 16px;
  --dm-radius-full: 9999px;
}
```

### 6.3 字体

```scss
:root {
  --dm-font-family: 'Inter', system-ui, -apple-system, sans-serif;
  --dm-font-size-xs: 12px;
  --dm-font-size-sm: 14px;
  --dm-font-size-md: 16px;
  --dm-font-size-lg: 18px;
  --dm-font-size-xl: 24px;
  --dm-font-size-2xl: 30px;
  --dm-font-size-3xl: 36px;

  --dm-font-weight-normal: 400;
  --dm-font-weight-medium: 500;
  --dm-font-weight-semibold: 600;
  --dm-font-weight-bold: 700;

  --dm-line-height-tight: 1.25;
  --dm-line-height-normal: 1.5;
  --dm-line-height-relaxed: 1.75;
}
```

### 6.4 动画

```scss
:root {
  --dm-transition-fast: 150ms;
  --dm-transition-normal: 250ms;
  --dm-transition-slow: 400ms;

  --dm-ease-out: cubic-bezier(0.16, 1, 0.3, 1);
  --dm-ease-in-out: cubic-bezier(0.65, 0, 0.35, 1);
  --dm-ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
}
```

---

## 七、主题切换实现

### 7.1 Composable

```typescript
// composables/useTheme.ts
export type ThemeType = 'light' | 'dark' | 'hero'

export function useTheme() {
  const theme = useState<ThemeType>('theme', () => 'hero')

  const setTheme = (newTheme: ThemeType) => {
    theme.value = newTheme

    // 更新 HTML class
    if (process.client) {
      document.documentElement.className = `theme-${newTheme}`
      localStorage.setItem('dm-theme', newTheme)
    }
  }

  const initTheme = () => {
    if (process.client) {
      const saved = localStorage.getItem('dm-theme') as ThemeType
      if (saved && ['light', 'dark', 'hero'].includes(saved)) {
        setTheme(saved)
      } else {
        setTheme('hero')
      }
    }
  }

  const toggleTheme = () => {
    const themes: ThemeType[] = ['light', 'dark', 'hero']
    const currentIndex = themes.indexOf(theme.value)
    const nextIndex = (currentIndex + 1) % themes.length
    setTheme(themes[nextIndex])
  }

  return {
    theme: readonly(theme),
    setTheme,
    initTheme,
    toggleTheme,
  }
}
```

### 7.2 主题切换组件

```vue
<!-- components/ThemeSwitch.vue -->
<script setup lang="ts">
const { theme, setTheme } = useTheme()

const themes = [
  { value: 'light', label: '亮色', icon: 'sun' },
  { value: 'dark', label: '暗色', icon: 'moon' },
  { value: 'hero', label: 'Hero', icon: 'crown' },
] as const
</script>

<template>
  <div class="theme-switch">
    <button
      v-for="t in themes"
      :key="t.value"
      :class="['theme-switch__btn', { 'is-active': theme === t.value }]"
      @click="setTheme(t.value)"
    >
      <Icon :name="t.icon" />
      <span>{{ t.label }}</span>
    </button>
  </div>
</template>

<style lang="scss" scoped>
.theme-switch {
  display: flex;
  gap: var(--dm-spacing-xs);
  padding: var(--dm-spacing-xs);
  background: var(--dm-color-surface);
  border-radius: var(--dm-radius-lg);

  &__btn {
    display: flex;
    align-items: center;
    gap: var(--dm-spacing-xs);
    padding: var(--dm-spacing-sm) var(--dm-spacing-md);
    border-radius: var(--dm-radius-md);
    color: var(--dm-color-text-secondary);
    transition: all var(--dm-transition-fast) var(--dm-ease-out);

    &:hover {
      color: var(--dm-color-text);
      background: var(--dm-color-surface-elevated);
    }

    &.is-active {
      color: var(--dm-color-primary);
      background: var(--dm-color-primary-light);
    }
  }
}
</style>
```

---

## 八、动画规范

### 8.1 阴影过渡

```scss
// 阴影变化必须平滑，避免突兀
.card {
  transition: box-shadow var(--dm-transition-normal) var(--dm-ease-out);

  &:hover {
    box-shadow: var(--dm-shadow-lg);
  }
}
```

### 8.2 显隐动画

```scss
// 使用 opacity + transform 组合
.modal {
  opacity: 0;
  transform: scale(0.95);
  transition:
    opacity var(--dm-transition-fast) var(--dm-ease-out),
    transform var(--dm-transition-fast) var(--dm-ease-out);

  &.is-visible {
    opacity: 1;
    transform: scale(1);
  }
}
```

### 8.3 主题切换动画

```scss
// 主题切换使用 CSS 过渡，避免闪烁
:root {
  transition:
    background-color var(--dm-transition-slow) var(--dm-ease-in-out),
    color var(--dm-transition-slow) var(--dm-ease-in-out);
}
```
